{% extends 'base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="hero-content">
        <div class="hero-text">
            <h1 class="hero-title">Freshly Baked Delights, <span class="highlight">Every Day</span></h1>
            <p class="hero-subtitle">Discover the magic of freshly baked goodness. Handcrafted with love and the finest
                ingredients. Delight in every bite, every day.</p>
            <div class="hero-buttons">
                <a href="{% url 'core:products' %}" class="btn btn-primary">Shop Now</a>
                <a href="{% url 'core:contact' %}" class="btn btn-outline">Find Our Store</a>
            </div>
        </div>
        <div class="hero-image">
            <div class="hero-image-container">
                <div class="hero-blob"></div>
                <img src="{% static 'images/hero-cake.png' %}" alt="Freshly baked cake" class="hero-img">
            </div>
        </div>
    </div>
</section>

<!-- Categories Section -->
<section class="section categories-section">
    <div class="container">
        <h2 class="section-title">Categories</h2>
        <div class="categories-carousel">
            {% for category in categories %}
            <a href="{% url 'core:category_detail' slug=category.slug %}" class="category-card">
                <div class="category-image">
                    {% if category.image %}
                    <img src="{{ category.image.url }}" alt="{{ category.name }}">
                    {% else %}
                    <div class="category-placeholder">üç∞</div>
                    {% endif %}
                </div>
                <span class="category-name">{{ category.name }}</span>
            </a>
            {% empty %}
            <div class="category-card">
                <div class="category-image">
                    <div class="category-placeholder">üéÇ</div>
                </div>
                <span class="category-name">Specials</span>
            </div>
            <div class="category-card">
                <div class="category-image">
                    <div class="category-placeholder">üç©</div>
                </div>
                <span class="category-name">Doughnuts</span>
            </div>
            <div class="category-card">
                <div class="category-image">
                    <div class="category-placeholder">üç™</div>
                </div>
                <span class="category-name">Cookies</span>
            </div>
            <div class="category-card">
                <div class="category-image">
                    <div class="category-placeholder">üéÇ</div>
                </div>
                <span class="category-name">Cakes</span>
            </div>
            <div class="category-card">
                <div class="category-image">
                    <div class="category-placeholder">üçû</div>
                </div>
                <span class="category-name">Breads</span>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Featured Products -->
<section class="section products-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Most Loved</h2>
            <a href="{% url 'core:products' %}" class="view-all-link">View All ‚Üí</a>
        </div>
        <div class="products-grid">
            {% for product in featured_products %}
            <div class="product-card">
                <a href="{% url 'core:product_detail' slug=product.slug %}" class="product-image-link">
                    <div class="product-image">
                        {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}">
                        {% else %}
                        <div class="product-placeholder">üßÅ</div>
                        {% endif %}
                        {% if product.is_special %}
                        <span class="product-badge badge-special">Special</span>
                        {% endif %}
                    </div>
                </a>
                <div class="product-info">
                    <h3 class="product-name">{{ product.name }}</h3>
                    <p class="product-price">${{ product.price }} {% if product.weight %}<span
                            class="product-weight">({{ product.weight }})</span>{% endif %}</p>
                    <div class="product-rating">
                        {% for i in "12345" %}
                        {% if forloop.counter <= product.rating %}<span class="star filled">‚òÖ</span>{% else %}<span
                                class="star">‚òÜ</span>{% endif %}
                            {% endfor %}
                    </div>
                    <form action="{% url 'core:add_to_cart' product_id=product.id %}" method="POST"
                        class="add-to-cart-form">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-add-cart">Add to Cart</button>
                    </form>
                </div>
            </div>
            {% empty %}
            <p class="no-products">No featured products yet. Check back soon!</p>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Special Offers -->
{% if special_products %}
<section class="section special-section">
    <div class="container">
        <div class="special-banner">
            <div class="special-content">
                <span class="special-label">üéÑ Holiday Specials</span>
                <h2 class="special-title">Christmas Cravings</h2>
                <p class="special-desc">Celebrate the season with our festive treats and delightful creations.</p>
                <a href="{% url 'core:products' %}?category=specials" class="btn btn-light">Explore Specials</a>
            </div>
            <div class="special-products">
                {% for product in special_products|slice:":3" %}
                <a href="{% url 'core:product_detail' slug=product.slug %}" class="special-product-card">
                    <div class="special-product-image">
                        {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}">
                        {% else %}
                        <div class="product-placeholder">üéÑ</div>
                        {% endif %}
                    </div>
                    <div class="special-product-info">
                        <span class="special-product-name">{{ product.name }}</span>
                        <span class="special-product-price">${{ product.price }}</span>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- About Preview -->
<section class="section about-preview-section">
    <div class="container">
        <div class="about-preview">

            <div class="about-preview-content">
                <h2 class="section-title">See Magic Happen, Right Here In Our Bakery</h2>
                <p>Step into our bakery and be captivated by the enchanting sight of our talented bakers in action. From
                    the careful mixing of ingredients to the precise artistry of decorating, inviting you to witness the
                    creation of our delectable delights right before your eyes.</p>
                <a href="{% url 'core:about' %}" class="btn btn-outline">Read More ‚Üí</a>
            </div>
        </div>
    </div>
</section>

<!-- Newsletter - Modern Design -->
<section class="newsletter-modern">
    <div class="newsletter-bg">
        <div class="floating-shape shape-1">üç∞</div>
        <div class="floating-shape shape-2">üßÅ</div>
        <div class="floating-shape shape-3">üç™</div>
        <div class="floating-shape shape-4">üéÇ</div>
    </div>
    <div class="container">
        <div class="newsletter-card">
            <div class="newsletter-icon">‚úâÔ∏è</div>
            <h2 class="newsletter-title">Stay in the Loop!</h2>
            <p class="newsletter-desc">Be the first to know about fresh arrivals, exclusive offers, and delicious baking tips delivered straight to your inbox.</p>
            <form class="newsletter-form-modern">
                <div class="input-wrapper">
                    <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                    <input type="email" placeholder="Enter your email address" class="email-input-modern" required>
                </div>
                <button type="submit" class="subscribe-btn">
                    <span>Subscribe Now</span>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </button>
            </form>
            <p class="newsletter-privacy">üîí We respect your privacy. Unsubscribe anytime.</p>
        </div>
    </div>
</section>

<style>
.newsletter-modern {
    position: relative;
    padding: 100px 0;
    background: linear-gradient(135deg, #C67C4E 0%, #8B4513 50%, #A65F35 100%);
    overflow: hidden;
}

.newsletter-bg {
    position: absolute;
    inset: 0;
    pointer-events: none;
}

.floating-shape {
    position: absolute;
    font-size: 3rem;
    opacity: 0.15;
    animation: floatShape 6s ease-in-out infinite;
}

.shape-1 { top: 10%; left: 5%; animation-delay: 0s; }
.shape-2 { top: 20%; right: 10%; animation-delay: 1.5s; }
.shape-3 { bottom: 15%; left: 15%; animation-delay: 3s; }
.shape-4 { bottom: 25%; right: 5%; animation-delay: 4.5s; }

@keyframes floatShape {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(10deg); }
}

.newsletter-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border-radius: 30px;
    padding: 60px;
    max-width: 650px;
    margin: 0 auto;
    text-align: center;
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
    position: relative;
    z-index: 1;
}

.newsletter-icon {
    font-size: 4rem;
    margin-bottom: 20px;
    display: block;
    animation: bounce 2s ease-in-out infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.newsletter-title {
    font-family: 'Playfair Display', serif;
    font-size: 2.5rem;
    font-weight: 700;
    color: #1A0F05;
    margin-bottom: 15px;
}

.newsletter-desc {
    color: #6B5A48;
    font-size: 1.1rem;
    line-height: 1.7;
    margin-bottom: 35px;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
}

.newsletter-form-modern {
    display: flex;
    gap: 15px;
    max-width: 500px;
    margin: 0 auto 20px;
}

.input-wrapper {
    flex: 1;
    position: relative;
}

.input-icon {
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    width: 22px;
    height: 22px;
    color: #9B8A78;
}

.email-input-modern {
    width: 100%;
    padding: 18px 20px 18px 55px;
    border: 2px solid #E8DDD1;
    border-radius: 16px;
    font-size: 1rem;
    background: #FDF8F3;
    transition: all 0.3s ease;
    color: #2D2013;
}

.email-input-modern:focus {
    outline: none;
    border-color: #C67C4E;
    box-shadow: 0 0 0 4px rgba(198, 124, 78, 0.15);
}

.email-input-modern::placeholder {
    color: #9B8A78;
}

.subscribe-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 18px 32px;
    background: linear-gradient(135deg, #C67C4E 0%, #A65F35 100%);
    color: white;
    border: none;
    border-radius: 16px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.subscribe-btn svg {
    width: 20px;
    height: 20px;
    transition: transform 0.3s ease;
}

.subscribe-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(198, 124, 78, 0.5);
}

.subscribe-btn:hover svg {
    transform: translateX(5px);
}

.newsletter-privacy {
    font-size: 0.85rem;
    color: #9B8A78;
    margin-top: 5px;
}

@media (max-width: 768px) {
    .newsletter-card {
        padding: 40px 25px;
    }
    
    .newsletter-title {
        font-size: 1.8rem;
    }
    
    .newsletter-form-modern {
        flex-direction: column;
    }
    
    .subscribe-btn {
        width: 100%;
        justify-content: center;
    }
}
</style>
{% endblock %}